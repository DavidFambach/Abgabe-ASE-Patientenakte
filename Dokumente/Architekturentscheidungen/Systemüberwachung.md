# Architekturentscheidung: Systemüberwachung

## Zusammenfassung
Bereich: Wartbarkeit der Anwendung
Thema: Systemüberwachung
ID: AD7
Architekturentscheidung: Zentrale Speicherung von Protokollen, Metriken und Traces unter Verwendung von OpenTelemetry

|                           |                                                                                                                                                                                                                                                                                                                                                                   |
| ------------------------- |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Problemstellung           | Es ist ein Vorgehen auszuwählen, um die strukturierte Speicherung von Informationen über die verschiedenen Systeme sicherzustellen, damit eine Beobachtbarkeit des Gesamtsystems während dem Betrieb gewährleistet ist.                                                                                                                                           |
| Annahmen                  | - Es wird eine Microservicearchitektur verwendet<br>- Python wird als Programmiersprache für die Dienste eingesetzt<br>- Es bestehen keine Vorgaben, die sich aus einer bereits vorhandenen Infrastruktur für Systemüberwachung ergeben                                                                                                                           |
| Motivation                | Umfangreiche Einsicht in die Anwendung, sodass Fehler und Ineffizienzen diagnostiziert werden können.                                                                                                                                                                                                                                                             |
| Alternativen              | Protokolle in lokalen Dateien<br>Protokolle, Metriken und Traces lokal<br>Protokolle, Metriken und Traces zerntral<br>Protokolle, Metriken und Traces zentral mit OpenTelemetry<br>Protokolle, Metriken und Traces zentral als zugekaufter Clouddienst                                                                                                            |
| Entscheidung              | Verwende Protokolle, Metriken und Traces zentral mit OpenTelemetry                                                                                                                                                                                                                                                                                                |
| Begründung                | Der bereitgestellte Funktionsumfang ist am höchsten und es besteht eine Flexibilität bei der konkreten Technologie, die als Speicher eingesetzt wird. Für eine detaillierte Begründung siehe Konzept "Systemüberwachung".                                                                                                                                         |
| Implikationen             | - Alle zu überwachenden Komponenten müssen ein OpenTelemetry-Paket einbinden.<br>- Falls für verwendete Programmbibliotheken bereits vorgefertigte OpenTelemetry-Instrumentaiton existiert, kann diese verwendet werden, um den Umfang der zu implementierenden Software zu reduzieren<br>- Eine späterer Austausch der gewählten Speichertechnologie ist möglich |
| Abgeleitete Anforderungen | keine                                                                                                                                                                                                                                                                                                                                                             |
| Zugehörige Entscheidungen | keine                                                                                                                                                                                                                                                                                                                                                             |

## Entscheidungsmatrix
| Kriterien                                  | Gewichtung | Protokolle in lokalen Dateien                                       | Evaluierung | Protokolle, Metriken und Traces lokal                               | Evaluierung | Protokolle, Metriken und Traces zerntral                            | Evaluierung | Protokolle, Metriken und Traces zentral mit OpenTelemetry           | Evaluierung | Protokolle, Metriken und Traces zentral als zugekaufter Clouddienst | Evaluierung |
| ------------------------------------------ | ---------- | ------------------------------------------------------------------- | ----------- | ------------------------------------------------------------------- | ----------- | ------------------------------------------------------------------- | ----------- | ------------------------------------------------------------------- | ----------- | ------------------------------------------------------------------- | ----------- |
| Kosten der Lösung (ohne Infrastruktur)     | 2          |                                                                     | ++          | abhängig von der Werkzeugauswahl                                    | O           | abhängig von der Werkzeugauswahl                                    | O           | abhängig von der Werkzeugauswahl                                    | O           | abhängig von der Werkzeugauswahl                                    | O           |
| Zusätzlich notwendige Infrastruktur        | 2          | keine                                                               | ++          | keine                                                               | ++          | Server für Speicherung, ggfs. mehr für gewählten Werkzeuge          | -           | Server für Speicherung, ggfs. mehr für gewählten Werkzeuge          | -           | keine Server, lediglich Netzwerk                                    | +           |
| Umfang der einsehbaren Informationen       | 3          |                                                                     | --          |                                                                     | +           |                                                                     | +           |                                                                     | +           |                                                                     | +           |
| Aufwand der Einsicht                       | 3          |                                                                     | --          |                                                                     | --          |                                                                     | O           |                                                                     | O           |                                                                     | O           |
| Aufwand der Implementierung                | 2          | Python-Bibliothek vorhanden                                         | ++          |                                                                     | +           |                                                                     | +           | Python-Bibliothek vorhanden                                         | +           |                                                                     | ++          |
| Aussagekraft der einsehbaren Informationen | 5          |                                                                     | -           |                                                                     | -           |                                                                     | -           |                                                                     | +           |                                                                     | +           |
| Herstellerbindung                          | 2          |                                                                     | ++          |                                                                     | ++          |                                                                     | ++          |                                                                     | ++          | abhängig von der Werkzeugauswahl                                    | -           |
| **Gesamt**                                 |            |                                                                     | 1 Pkt.      |                                                                     | 3 Pkt.      |                                                                     | 4 Pkt.      |                                                                     | 14 Pkt.     |                                                                     | 14 Pkt.     |

Legende zur Evaluierung:
 - ++: Die Alternative ist bezüglich dem Kriterium sehr positiv zu bewerten. Diese Bewertung entspricht 3 Punkten.
 - +: Die Alternative ist bezüglich dem Kriterium positiv zu bewerten. Diese Bewertung entspricht 1 Punkt.
 - O: Die Alternative ist bezüglich dem Kriterium neutral zu bewerten, eine Bewertung der Alternative hinsichtlich dieses Kriteriums ist nicht sinnvoll oder nicht praktikabel oder wurde aus einem anderen Grund nicht vorgenommen. Diese Bewertung entspricht 0 Punkten.
 - \-: Die Alternative ist bezüglich dem Kriterium negativ zu bewerten. Diese Bewertung entspricht -1 Punkt.
 - \-\-: Die Alternative ist bezüglich dem Kriterium sehr negativ zu bewerten. Diese Bewertung entspricht -3 Punkten.
Die Gesamtbewertung ist die Summe der gewichteten Evaluierungen über alle Kriterien, die keine Ausschlusskriterien sind. Alternativen, die bezüglich mindestens einem Ausschlusskriterium negativ bewertet wurden, erhalten keine Gesamtbewertung und werden nicht weiter betrachet.
